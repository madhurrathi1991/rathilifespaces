<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<?php include 'head.php'; ?>

	<body class="" style="">
		<h1 class="seoHeaderText">Projects</h1>
		<div class="page_content listingPage">
			<div class="desktopMenuOverlay"></div>

 <?php include 'header.php'; ?>

<div class="header__search__popup">
	<div class="header__search__popup__close">
		<img class="w-100" width="30" height="30" src="assets/images/icons/close.svg" alt="Close" title="">
	</div>
	<div class="header__search__popupInner d-flex align-items-center justify-content-center w-100 h-100">
		<div class="searchboxWrapper theme_section w-100 text-center">
			<div class="navbar-brand">
				<a href="index.html">
					<img class="logo w-100" width="150" height="53" src="assets/images/chandak-logo.svg" alt="Chandak Group" title="Chandak Group">
				</a>
			</div>
	     	<div class="theme_top_bottom pt-0 pb-0">
	         	<div class="searchboxWrpInn">
		            <div class="container">
		               	<div class="searchBox d-flex flex-wrap">
		                  	<div class="searchBoxDropdown d-flex flex-wrap">
		                     	<div class="customDropDown filter_regions" rel="regions">
			                        <select id="selectRegion1" rel="Select location">
			                           <option value="" class="select-dropdown__list-item">All Location</option>
																					<option value="magathane-borivali-east" class="select-dropdown__list-item">Borivali WEH</option>
																					<option value="worli" class="select-dropdown__list-item">Worli</option>
																					<option value="andheri-w" class="select-dropdown__list-item">Andheri(W)</option>
																					<option value="andheri-e" class="select-dropdown__list-item">Andheri(E)</option>
																					<option value="vile-parle" class="select-dropdown__list-item">Vile Parle(W)</option>
																					<option value="goregaon-w" class="select-dropdown__list-item">Goregaon(W)</option>
																					<option value="near-borivali-e-station" class="select-dropdown__list-item">Near Borivali(E) Station</option>
																					<option value="mulund" class="select-dropdown__list-item">Mulund(W)</option>
													                        </select>
			                    </div>
		                     	<div class="customDropDown filter_types" rel="types">
			                        <select id="selectType1" rel="Select Type">
			                           	<option value="" class="select-dropdown__list-item">All types</option>
			                           													<option value="residential" class="select-dropdown__list-item">residential</option>
																						<option value="commercial" class="select-dropdown__list-item">commercial</option>
													                        </select>
		                     	</div>
		                     	<div class="customDropDown filter_status" style="display:none;" rel="status">
			                        <select id="selectStatus1" rel="Select Status">
			                           	<option value="" class="select-dropdown__list-item">All status</option>
			                           	<option value="ongoing" class="select-dropdown__list-item">Ongoing</option>
			                           	<option value="completed" class="select-dropdown__list-item">Completed </option>
			                        </select>
		                     	</div>
		                     	<div class="customDropDown filter_configuration" rel="configuration">
			                        <select id="selectConfig1" rel="select configuration">
			                           	<option value="" class="select-dropdown__list-item">All configurations</option>
			                           				                                	<option value="1-bhk" class="select-dropdown__list-item">1 BHK</option>
			                           				                                	<option value="2-bhk" class="select-dropdown__list-item">2 BHK</option>
			                           				                                	<option value="2-5-bhk" class="select-dropdown__list-item">2.5 BHK</option>
			                           				                                	<option value="3-bhk" class="select-dropdown__list-item">3 BHK</option>
			                           				                        </select>
		                     	</div>
		                  	</div>
		                  	<div class="searchBtn d-flex align-items-center justify-content-center" id="main_search">
		                     	<svg viewBox="0 0 20 20" fill="none"><path d="M18.1239 17.2411L13.4039 12.5211C14.5382 11.1595 15.1038 9.41291 14.9831 7.64483C14.8624 5.87675 14.0647 4.22326 12.7559 3.02834C11.4472 1.83341 9.72813 1.18906 7.95639 1.22932C6.18465 1.26958 4.49663 1.99134 3.2435 3.24448C1.99037 4.49761 1.2686 6.18562 1.22834 7.95736C1.18808 9.7291 1.83244 11.4482 3.02736 12.7569C4.22228 14.0657 5.87577 14.8634 7.64385 14.9841C9.41194 15.1047 11.1585 14.5391 12.5202 13.4049L17.2402 18.1249L18.1239 17.2411ZM2.49891 8.12489C2.49891 7.01237 2.82881 5.92483 3.4469 4.99981C4.06498 4.07478 4.94348 3.35381 5.97132 2.92807C6.99915 2.50232 8.13015 2.39093 9.2213 2.60797C10.3124 2.82501 11.3147 3.36074 12.1014 4.14741C12.8881 4.93408 13.4238 5.93636 13.6408 7.02751C13.8579 8.11865 13.7465 9.24965 13.3207 10.2775C12.895 11.3053 12.174 12.1838 11.249 12.8019C10.324 13.42 9.23643 13.7499 8.12391 13.7499C6.63258 13.7482 5.2028 13.1551 4.14826 12.1005C3.09373 11.046 2.50057 9.61622 2.49891 8.12489Z" fill="#5C5447"></path></svg>
		                     	<h3>search properties</h3>
		                  	</div>
		               	</div>
		            </div>
		        </div>
	      	</div>
	   	</div>
	</div>
</div>				<div class="dark_bg">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="breadcrumb" data-aos="fade-in">
					<a class="breadcrumb-item h2" href="index.html">Home</a>
					<a class="breadcrumb-item h2 active" href="#">Projects</a>
				</div>
			</div>
		</div>
	</div>

   	<div class="otherPagesHead position-relative">
		<div class="container">
			<div class="theme_header">
			   <h2 class="big_title" data-aos="fade-in" data-aos-delay="100">Our projects</h2>
			</div>
		</div>
	</div>

   	<div class="mobileFiltrBtn " data-aos="fade-in">
      	<div class="container">
         	<div class=" d-flex align-items-center justify-content-end">
	            <div class="mobileFilterClick">
	               <h2 class="uppercase">filters</h2>
	               <img class="lazyload" src="assets/images/placeholder/icons.png" data-src="https://www.chandakgroup.com/assets/images/icons/filter.svg" alt="Filter" title="">
	            </div>
         	</div>
      	</div>
   	</div>

   	<div class="listing__search__filter">
      	<div class="listing__search__filter_inn d-flex align-items-center justify-content-center w-100 h-100" data-aos="fade-in" data-aos-delay="200">
         	<div class="searchboxWrapper theme_section w-100">
            	<div class="theme_top_bottom pt-0">
               		<div class="searchboxWrpInn position-relative">
	                  	<div class="container">
		                    <div class="searchBox d-flex flex-wrap">
    <div class="listing__filter__popup__close">
       	<img class="w-100 lazyload" src="assets/images/placeholder/icons.png" data-src="https://www.chandakgroup.com/assets/images/icons/close.svg" alt="Close" title="">
    </div>
    <div class="searchBoxDropdown d-flex flex-wrap">
       	<div class="customDropDown filter_regions" rel="regions">
       		          	<select id="selectRegion" rel="Select location">
					<option value="" class="select-dropdown__list-item">All Location</option>
												<option value="magathane-borivali-east" class="select-dropdown__list-item">Borivali WEH</option>
												<option value="worli" class="select-dropdown__list-item">Worli</option>
												<option value="andheri-w" class="select-dropdown__list-item">Andheri(W)</option>
												<option value="andheri-e" class="select-dropdown__list-item">Andheri(E)</option>
												<option value="vile-parle" class="select-dropdown__list-item">Vile Parle(W)</option>
												<option value="goregaon-w" class="select-dropdown__list-item">Goregaon(W)</option>
												<option value="near-borivali-e-station" class="select-dropdown__list-item">Near Borivali(E) Station</option>
												<option value="mulund" class="select-dropdown__list-item">Mulund(W)</option>
					          	</select>
       	</div>
       	<div class="customDropDown filter_types" rel="types">
       		          	<select id="selectType" rel="Select Type">
					<option value="" class="select-dropdown__list-item">All types</option>
												<option value="residential" class="select-dropdown__list-item">residential</option>
												<option value="commercial" class="select-dropdown__list-item">commercial</option>
					          	</select>
       	</div>
       	<div class="customDropDown filter_status" style="display:none;" rel="status">
       		          	<select id="selectStatus" rel="Select Status">
					<option value="" class="select-dropdown__list-item">All status</option>
					<option value="ongoing" class="select-dropdown__list-item">Ongoing</option>
					<option value="completed" class="select-dropdown__list-item">Completed </option>
          	</select>
       	</div>
       	<div class="customDropDown filter_configuration" rel="configuration">
       		          	<select id="selectConfig" rel="Select configuration">
					<option value="" class="select-dropdown__list-item">All configurations</option>
												<option value="1-bhk" class="select-dropdown__list-item">1 BHK</option>
												<option value="2-bhk" class="select-dropdown__list-item">2 BHK</option>
												<option value="2-5-bhk" class="select-dropdown__list-item">2.5 BHK</option>
												<option value="3-bhk" class="select-dropdown__list-item">3 BHK</option>
					          	</select>
       	</div>
    </div>
    <div class="searchBtn d-flex align-items-center justify-content-center">
       	<svg viewBox="0 0 20 20" fill="none"><path d="M18.1239 17.2411L13.4039 12.5211C14.5382 11.1595 15.1038 9.41291 14.9831 7.64483C14.8624 5.87675 14.0647 4.22326 12.7559 3.02834C11.4472 1.83341 9.72813 1.18906 7.95639 1.22932C6.18465 1.26958 4.49663 1.99134 3.2435 3.24448C1.99037 4.49761 1.2686 6.18562 1.22834 7.95736C1.18808 9.7291 1.83244 11.4482 3.02736 12.7569C4.22228 14.0657 5.87577 14.8634 7.64385 14.9841C9.41194 15.1047 11.1585 14.5391 12.5202 13.4049L17.2402 18.1249L18.1239 17.2411ZM2.49891 8.12489C2.49891 7.01237 2.82881 5.92483 3.4469 4.99981C4.06498 4.07478 4.94348 3.35381 5.97132 2.92807C6.99915 2.50232 8.13015 2.39093 9.2213 2.60797C10.3124 2.82501 11.3147 3.36074 12.1014 4.14741C12.8881 4.93408 13.4238 5.93636 13.6408 7.02751C13.8579 8.11865 13.7465 9.24965 13.3207 10.2775C12.895 11.3053 12.174 12.1838 11.249 12.8019C10.324 13.42 9.23643 13.7499 8.12391 13.7499C6.63258 13.7482 5.2028 13.1551 4.14826 12.1005C3.09373 11.046 2.50057 9.61622 2.49891 8.12489Z" fill="#5C5447"></path></svg>
       <h3>search properties</h3>
    </div>
</div>						</div>
           			</div>
        		</div>
     		</div>
  		</div>
	</div>

   <div class="projectListing position-relative">
		 	<div class="svgDrawingEle mx-100">
         	<svg class="w-100 svgEle" viewBox="0 0 1366 210" fill="none">
            	<path d="M-24 209L683 2.00004L1390 209" stroke="#414C52" stroke-width="2"/>
        	</svg>
      	</div>
   		<div class="container">
   			<div class="listing_project_row row">
   				
         	</div>

         	<div class="d-none" id="load_more_projects"></div>
   		</div>
   	</div>
</div>

<input type="hidden" id="page_no" value="1">
<input type="hidden" id="total_projects" value="">

<script>
	var action = "";
    var data = {"action":"filters"}
    var isSubmitting = false;
	var addingFirst = "";
    var csrf_token = '';


	function load_content(){
    	data["page_no"] = $("#page_no").val();
        data["is_ajax"] = 1;

        if(csrf_token == ''){
            csrf_token = '79affac9048d68aef8a3f60b12bac6b3';
            $("#final_csrf_token").val(csrf_token);
        }

        data['csrf_chandakgroup'] = $("#final_csrf_token").val();
    	var contentLoad = call_ajax('projects.html', data, 'JSON', true, 'POST');
        contentLoad.done(function(result){

            $('input[name=csrf_chandakgroup]').val(result['token']);
            csrf_token = result['token'];
            $("#final_csrf_token").val(result['token']);

            if(result["status"] == true){
            	if(addingFirst == ""){
            		addingFirst = "not empty";
            		
            		$("#total_projects").val(result["total_projects"]);

            		if(!result["data"]){
            			result["show_more"] = 0;
                		$('.listing_project_row').html('<h2>No result Found.</h2>');
            		}else{
            			$('.listing_project_row').html(result["data"]);
            		}
            	}else{
            		if(result["data"] != ""){
                		$('.listing_project_row').append(result["data"]);
                	}else{
                		result["show_more"] = 0;
                		$('.listing_project_row').html('<h2>No result Found.</h2>');
                	}
            	}
            }

            $("#page_no").val(result["page_no"]);
            if(result["show_more"] == 0 || result["total_projects"] == 0){
            	action = 'active';
                $("#load_more_projects").fadeOut();
            }else{
            	action = 'inactive';
            	$("#load_more_projects").removeClass('d-none');
            }


            //Set the data-value
            if(data["regions"]){
                $(".filter_regions").find(".select-dropdown__button").attr("data-value", data["regions"]);
            }
            if(data["types"]){
                $(".filter_types").find(".select-dropdown__button").attr("data-value", data["types"]);
            }
            if(data["status"]){
                $(".filter_status").find(".select-dropdown__button").attr("data-value", data["status"]);
            }
            if(data["configuration"]){
                $(".filter_configuration").find(".select-dropdown__button").attr("data-value", data["configuration"]);
            }

        });
    }

    setTimeout(function(){
    	load_content();
    	action = "inactive";
    },800);

    $(document).ready(function(){
    	$(window).scroll(function(){
            if($(window).scrollTop() + $(window).height() > $(".listing_project_row").height()  && action == 'inactive'){
                action = 'active';
                setTimeout(function(){
                    load_content();
                },500);
            }
        });
    });

    function call_ajax(url,data,datatype,sync,type){
		sync = typeof sync !== 'undefined' ? sync : false;
		if(isSubmitting && !sync){ return; }
	    isSubmitting = true;
		var myajax = $.ajax({
		    url: url,
			type: type,
			dataType: datatype,
			data:  data,
			async: sync,
			beforeSend: function() {
	            //$(".loader").css("display", "block");
	        },
			complete:function()
			{
				//$(".loader").css("display", "none");
				isSubmitting = false;
                equalheight('.project_location');
			}
		});
		return myajax;
	}

	function modifyUrl(data){
        var str = '';
        var i = 0;
        $.each(data, function(a, b) {
            var and = (i>0) ? '&' : '';
            if(a != 'csrf_chandakgroup'){
                str += and+a+'='+b;
                i++;
            }
        });
        return  window.location.protocol+'//'+window.location.hostname+window.location.pathname+'?'+str
    }

	$(document).on('click', 'ul.select-dropdown__list > li', function (e) {
        var filter_on = $(this).attr("data-value");
        var data_type = $(this).parent().parent().parent().attr("rel");
        var checked_checkbox = "";
        var text = $(this).text();

        /*if(data_type == "regions"){
        	data["types"] = "";
        	data["status"] = "";
        	data["configuration"] = "";

        	$(this).parent().parent().parent().parent().find("#types").find("select").attr("rel", "Select Type");
        	$(this).parent().parent().parent().parent().find("#types").find("button").attr("data-value", "Select Type");
        	$(this).parent().parent().parent().parent().find("#types").find("button > span.select-dropdown").html("Select Type");
        	$(this).parent().parent().parent().parent().find("#types").find("ul").find(".select-dropdown__list-item").removeClass("selected");

        	$(this).parent().parent().parent().parent().find("#status").find("select").attr("rel", "Select Status");
        	$(this).parent().parent().parent().parent().find("#status").find("button").attr("data-value", "Select Status");
        	$(this).parent().parent().parent().parent().find("#status").find("button > span.select-dropdown").html("Select Status");
        	$(this).parent().parent().parent().parent().find("#status").find("ul").find(".select-dropdown__list-item").removeClass("selected");

        	$(this).parent().parent().parent().parent().find("#configuration").find("select").attr("rel", "Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("button").attr("data-value", "Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("button > span.select-dropdown").html("Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("ul").find(".select-dropdown__list-item").removeClass("selected");
        }

        if(data_type == "types"){
        	data["status"] = "";
        	data["configuration"] = "";

        	$(this).parent().parent().parent().parent().find("#status").find("select").attr("rel", "Select Status");
        	$(this).parent().parent().parent().parent().find("#status").find("button").attr("data-value", "Select Status");
        	$(this).parent().parent().parent().parent().find("#status").find("button > span.select-dropdown").html("Select Status");
        	$(this).parent().parent().parent().parent().find("#status").find("ul").find(".select-dropdown__list-item").removeClass("selected");

        	$(this).parent().parent().parent().parent().find("#configuration").find("select").attr("rel", "Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("button").attr("data-value", "Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("button > span.select-dropdown").html("Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("ul").find(".select-dropdown__list-item").removeClass("selected");
        }

        if(data_type == "status"){
        	data["configuration"] = "";

        	$(this).parent().parent().parent().parent().find("#configuration").find("select").attr("rel", "Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("button").attr("data-value", "Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("button > span.select-dropdown").html("Select configuration");
        	$(this).parent().parent().parent().parent().find("#configuration").find("ul").find(".select-dropdown__list-item").removeClass("selected");
        }*/

        var thisVal = $(this);
        thisVal.parent().removeClass('active');
        thisVal.parent().parent().parent().find("select").attr("rel", filter_on);
        thisVal.parent().parent().parent().find("button").attr("data-value", filter_on);
        thisVal.parent().parent().parent().find("button > span.select-dropdown").html(text);

        var base_url = 'index.html';
        var url = base_url+"projects/load_data";

        $.ajax({
            type: "POST",
            dataType: "json",
            url: url,
            data: {
                type: data_type,
                value: filter_on,
                'csrf_chandakgroup': $("#final_csrf_token").val()
            },
            //async: false,
            global : false,
            beforeSend:function(){
            },
            success: function(result) {

                $('input[name=csrf_chandakgroup]').val(result['token']);
                $("#final_csrf_token").val(result['token']);

                if(result["status"] === false){
                    console.log(result['message'])
                }else{
                    if(data_type == 'types'){

                        thisVal.parent().parent().parent().parent().find(".filter_regions").find("ul.select-dropdown__list").html(result['regions_html']);
                        thisVal.parent().parent().parent().parent().find(".filter_regions").find("select").html(result['select_regions_html']);

                        thisVal.parent().parent().parent().parent().find(".filter_configuration").find("ul.select-dropdown__list").html(result['typology_html']);
                        thisVal.parent().parent().parent().parent().find(".filter_configuration").find("select").html(result['select_typology_html']);
                    }

                    if(data_type == 'regions'){

                        thisVal.parent().parent().parent().parent().find(".filter_types").find("ul.select-dropdown__list").html(result['type_html']);
                        thisVal.parent().parent().parent().parent().find(".filter_types").find("select").html(result['select_type_html']);

                        thisVal.parent().parent().parent().parent().find(".filter_configuration").find("ul.select-dropdown__list").html(result['typology_html']);
                        thisVal.parent().parent().parent().parent().find(".filter_configuration").find("select").html(result['select_typology_html']);
                    }
                }
            },
            error: function() {
                $('input[name=csrf_chandakgroup]').val(result['token']);
                $("#final_csrf_token").val(result['token']);
                console.log("Failed to load the details");
                
            }
        });

        data[data_type] = filter_on;
        window.history.pushState("", "", modifyUrl(data));
        data['action'] = "filters";
        load_filter_data(data);



        
    });

    function load_filter_data(data){
    	data["page_no"] =  1;

        if(csrf_token == ''){
            csrf_token = '79affac9048d68aef8a3f60b12bac6b3';
            $("#final_csrf_token").val(csrf_token);
        }

        data['csrf_chandakgroup'] = $("#final_csrf_token").val();

        var populate = call_ajax('projects.html', data, 'JSON', true, 'POST');
        populate.done(function(result){

            $('input[name=csrf_chandakgroup]').val(result['token']);
            csrf_token = result['token'];
            $("#final_csrf_token").val(result['token']);

            if(result["status"] == true){
                $('.listing_project_row').html(result["data"]);
                $("#total_projects").val(result["total_projects"]);
                $("#total_projects").html(result["total_projects"]+" Results");
            }

            $("#page_no").val(2);
            if(result["show_more"] == 0 || result["total_projects"] == 0){
            	action = 'active';
                $("#load_more_projects").fadeOut();
                //$("#load_more_projects").remove();
            }else{
            	action = 'inactive';
            	$("#load_more_projects").fadeIn();
            }

            if(result["total_projects"] == 0){
            	 $('.listing_project_row').html('<h2>No result Found.</h2>');
            }

        });
    }

    $(document).on('click', '.searchBtn', function(e){
        var regions = $(this).parent().parent().find(".filter_regions").find(".select-dropdown__button").attr("data-value");
        var types = $(this).parent().parent().find(".filter_types").find(".select-dropdown__button").attr("data-value");
        var status = $(this).parent().parent().find(".filter_status").find(".select-dropdown__button").attr("data-value");
        var configuration = $(this).parent().parent().find(".filter_configuration").find(".select-dropdown__button").attr("data-value");
        if(regions.toLowerCase() != "select location"){
            data["regions"] = regions;
        }

        if(types.toLowerCase() != "select type"){
            data["type"] = types;
        }

        if(status.toLowerCase() != "select status"){
            data["status"] = status;
        }

        if(configuration.toLowerCase() != "select configuration"){
            data["configuration"] = configuration;
        }
        data['action'] = "filters";
        load_filter_data(data);
    });

</script>			
	 <?php include 'footer.php'; ?>
	 <?php include 'scripts.php'; ?>
		</div>
	</body>
</html>